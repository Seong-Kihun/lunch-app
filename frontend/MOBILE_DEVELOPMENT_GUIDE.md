# 📱 모바일 개발 가이드

장소를 옮겨다니며 개발할 때 발생하는 네트워크 문제를 해결하는 가이드입니다.

## 🚀 빠른 시작

### 1. 기본 시작 (권장)
```bash
npm start
```
- 자동으로 네트워크 환경을 감지하여 최적의 모드로 시작합니다.
- 장소를 옮겨다닐 때 가장 편리합니다.

### 2. 수동 모드 선택
```bash
# 터널 모드 (어디서든 접근 가능, 가장 안정적)
npm run start:tunnel

# LAN 모드 (같은 네트워크에서만 접근 가능)
npm run start:lan

# 로컬 모드 (같은 컴퓨터에서만 접근 가능)
npm run start:localhost
```

## 🔧 네트워크 문제 해결

### 문제 1: "Could not connect to the server" 오류

**원인**: IP 주소가 바뀌어서 앱이 서버에 연결할 수 없음

**해결 방법**:
1. 앱에서 WiFi 아이콘을 탭하여 네트워크 설정 모달을 엽니다
2. "네트워크 재초기화" 버튼을 탭합니다
3. 자동 감지가 실패하면 수동으로 서버 URL을 선택합니다

### 문제 2: QR 코드가 스캔되지 않음

**원인**: Expo 개발 서버가 잘못된 네트워크 인터페이스에 바인딩됨

**해결 방법**:
1. 터널 모드 사용: `npm run start:tunnel`
2. 또는 LAN 모드 사용: `npm run start:lan`

### 문제 3: 앱이 로딩되지 않음

**원인**: 네트워크 설정이 잘못됨

**해결 방법**:
1. 앱을 완전히 종료합니다
2. `npm start`로 서버를 다시 시작합니다
3. 앱을 다시 실행합니다

## 📍 장소별 개발 팁

### 🏠 집에서 개발할 때
```bash
npm run start:lan
```
- 같은 WiFi 네트워크에서만 접근 가능
- 가장 빠른 속도

### 🏢 회사에서 개발할 때
```bash
npm start
```
- 자동 감지 모드 사용
- 네트워크가 바뀌어도 자동으로 대응

### ☕ 카페에서 개발할 때
```bash
npm run start:tunnel
```
- 터널 모드를 사용하여 안정적인 연결
- 공용 WiFi에서도 작동

### 🚗 이동 중에 개발할 때
```bash
npm run start:tunnel
```
- 핫스팟을 사용해도 안정적으로 작동
- 네트워크가 자주 바뀌어도 문제없음

## 🛠️ 고급 설정

### 네트워크 설정 모달 사용법

1. **앱에서 WiFi 아이콘 탭**
   - 홈 화면 상단의 WiFi 아이콘을 탭합니다

2. **현재 상태 확인**
   - 연결 상태와 현재 서버 URL을 확인합니다

3. **네트워크 재초기화**
   - "네트워크 재초기화" 버튼을 탭합니다
   - 자동으로 최적의 서버 URL을 찾습니다

4. **수동 서버 URL 선택**
   - 사용 가능한 서버 URL 목록에서 선택합니다
   - 각 URL을 탭하여 연결을 테스트합니다

### 환경변수 설정

`.env` 파일을 생성하여 고정 IP를 설정할 수 있습니다:

```env
# .env 파일
EXPO_SERVER_URL=http://192.168.1.100:5000
```

### 디버깅

네트워크 문제가 있을 때 다음 로그를 확인하세요:

```bash
# 상세한 로그와 함께 시작
EXPO_DEBUG=1 npm start
```

## 🔍 문제 진단

### 1. 네트워크 연결 확인
```bash
# 서버가 실행 중인지 확인
curl http://localhost:5000/health

# 또는 브라우저에서 확인
# http://localhost:5000/health
```

### 2. 포트 사용 확인
```bash
# 5000번 포트 사용 확인 (Windows)
netstat -an | findstr :5000

# 8081번 포트 사용 확인 (Expo)
netstat -an | findstr :8081
```

### 3. 방화벽 설정 확인
- Windows Defender 방화벽에서 Node.js와 Expo를 허용했는지 확인
- 회사 네트워크에서는 IT 부서에 문의

## 📱 모바일 앱 설정

### Android 설정
1. **개발자 옵션 활성화**
   - 설정 > 휴대전화 정보 > 빌드 번호를 7번 탭

2. **USB 디버깅 활성화**
   - 설정 > 개발자 옵션 > USB 디버깅 활성화

3. **앱 설치 허용**
   - 설정 > 보안 > 알 수 없는 소스 허용

### iOS 설정
1. **개발자 계정 필요**
   - Apple Developer Program 가입

2. **Expo Go 앱 설치**
   - App Store에서 Expo Go 설치

3. **신뢰할 수 있는 개발자 설정**
   - 설정 > 일반 > VPN 및 기기 관리

## 🚨 자주 발생하는 오류

### "Metro bundler failed to start"
```bash
# Metro 캐시 클리어
npx expo start --clear

# 또는
npm start -- --clear
```

### "Unable to resolve module"
```bash
# node_modules 재설치
rm -rf node_modules
npm install
```

### "Network request failed"
1. 네트워크 설정 모달에서 서버 URL 확인
2. 서버가 실행 중인지 확인
3. 방화벽 설정 확인

## 💡 개발 팁

1. **터널 모드 사용**: 장소를 자주 옮기는 경우 터널 모드가 가장 안정적입니다.

2. **네트워크 설정 저장**: 앱이 자동으로 최적의 서버 URL을 저장하므로 한 번 설정하면 계속 사용됩니다.

3. **오프라인 모드**: 네트워크가 불안정할 때는 `npm run start:offline`을 사용하세요.

4. **디버깅**: 문제가 있을 때는 `EXPO_DEBUG=1 npm start`로 상세한 로그를 확인하세요.

5. **백업**: 중요한 설정은 앱이 자동으로 백업하므로 걱정하지 마세요.

## 📞 지원

문제가 계속 발생하면:
1. 이 가이드의 문제 해결 섹션을 확인하세요
2. 네트워크 설정 모달의 도움말을 참고하세요
3. 개발팀에 문의하세요

---

**Happy Coding! 🎉**
